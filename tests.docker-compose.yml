version: "3.9"

services:
  php-fpm:
    container_name: roave-bc-test
    volumes:
      - ./.git:/var/www/html/.git
      - ./bin:/var/www/html/bin
      - ./src:/var/www/html/src
      - ./test:/var/www/html/test
      - ./vendor:/var/www/html/vendor
      - ./.phpunit.result.cache:/var/www/html/.phpunit.result.cache
      - ./composer.json:/var/www/html/composer.json
      - ./composer.lock:/var/www/html/composer.lock
      - ./phpunit.xml.dist:/var/www/html/phpunit.xml.dist
    build:
      context: ./
      dockerfile: tests.Dockerfile
    command: sh -c "git config --global --add safe.directory /var/www/html && tail -f /dev/null"
